name: deepwork_jobs
version: "1.0.0"
summary: "Creates and manages multi-step AI workflows. Use when defining, implementing, or improving DeepWork jobs."
description: |
  Core commands for managing DeepWork jobs. These commands help you define new multi-step
  workflows and learn from running them.

  The `new_job` workflow guides you through defining and implementing a new job by
  asking structured questions about your workflow, understanding each step's inputs and outputs,
  reviewing the specification, and generating all necessary files.

  The `learn` skill reflects on conversations where DeepWork jobs were run, identifies
  confusion or inefficiencies, and improves job instructions. It also captures bespoke
  learnings specific to the current run into AGENTS.md files in the working folder.

workflows:
  - name: new_job
    summary: "Create a new DeepWork job from scratch through definition, review, and implementation"
    steps:
      - define
      - review_job_spec
      - implement

changelog:
  - version: "1.0.0"
    changes: "Added workflows section to distinguish new_job workflow (define→review_job_spec→implement) from standalone learn skill"
  - version: "0.1.0"
    changes: "Initial version"
  - version: "0.2.0"
    changes: "Replaced refine command with learn command for conversation-driven improvement"
  - version: "0.3.0"
    changes: "Added make_new_job.sh script and templates directory; updated instructions to reference templates instead of inline examples"
  - version: "0.4.0"
    changes: "Removed implementation_summary and learning_summary outputs; simplified step outputs"
  - version: "0.5.0"
    changes: "Standardized on 'ask structured questions' phrasing for user input; Updated quality criteria hooks to verify phrase usage; Added guidance in implement.md to use phrase in generated instructions"
  - version: "0.6.0"
    changes: "Added doc spec support; define.md now detects document-oriented workflows and guides doc spec creation; learn.md now identifies and applies doc spec-related improvements"
  - version: "0.7.0"
    changes: "Added job.yml doc spec; define step now outputs job.yml with doc_spec reference for quality validation"
  - version: "0.8.0"
    changes: "Added review_job_spec step between define and implement for doc spec-based quality validation using sub-agent review"
  - version: "0.9.0"
    changes: "Improved skill descriptions with third-person voice and 'Use when...' triggers for better discoverability"

steps:
  - id: define
    name: "Define Job Specification"
    description: "Creates a job.yml specification by gathering workflow requirements through structured questions. Use when starting a new multi-step workflow."
    instructions_file: steps/define.md
    agent: deepwork-jobs
    inputs:
      - name: job_purpose
        description: "What complex task or workflow are you trying to accomplish?"
    outputs:
      - file: job.yml
        doc_spec: .deepwork/doc_specs/job_spec.md
    dependencies: []

  - id: review_job_spec
    name: "Review Job Specification"
    description: "Reviews job.yml against quality criteria using a sub-agent for unbiased validation. Use after defining a job specification."
    instructions_file: steps/review_job_spec.md
    agent: deepwork-jobs
    inputs:
      - file: job.yml
        from_step: define
    outputs:
      - file: job.yml
        doc_spec: .deepwork/doc_specs/job_spec.md
    dependencies:
      - define

  - id: implement
    name: "Implement Job Steps"
    description: "Generates step instruction files and syncs slash commands from the job.yml specification. Use after job spec review passes."
    instructions_file: steps/implement.md
    agent: deepwork-jobs
    inputs:
      - file: job.yml
        from_step: review_job_spec
    outputs:
      - steps/
    dependencies:
      - review_job_spec

  - id: learn
    name: "Learn from Job Execution"
    description: "Analyzes conversation history to improve job instructions and capture learnings. Use after running a job to refine it."
    instructions_file: steps/learn.md
    agent: deepwork-jobs
    exposed: true
    inputs:
      - name: job_name
        description: "Name of the job that was run (optional - will auto-detect from conversation)"
    outputs:
      - AGENTS.md
    dependencies: []
