name: update
version: "1.1.0"
summary: "Update standard jobs in src/ and sync to installed locations"
description: |
  A workflow for maintaining standard jobs bundled with DeepWork. Standard jobs
  (like `deepwork_jobs` and `deepwork_rules`) are source-controlled in
  `src/deepwork/standard_jobs/` and must be edited thereâ€”never in `.deepwork/jobs/`
  or `.claude/commands/` directly.

  This job guides you through:
  1. Identifying which standard job(s) to update from conversation context
  2. Making changes in the correct source location (`src/deepwork/standard_jobs/[job_name]/`)
  3. Running `deepwork install` to propagate changes to `.deepwork/` and command directories
  4. Verifying the sync completed successfully

  Use this job whenever you need to modify job.yml files, step instructions, or hooks
  for any standard job in the DeepWork repository.

changelog:
  - version: "1.0.0"
    changes: "Initial job creation"
  - version: "1.1.0"
    changes: "Removed sync_verification.md output requirement"

steps:
  - id: job
    name: "Update Standard Job"
    description: "Edit standard job source files and sync to installed locations"
    instructions_file: steps/job.md
    inputs:
      - name: job_context
        description: "Determine from conversation context which standard job(s) to update and what changes are needed"
    outputs: []
    dependencies: []
    quality_criteria:
      - "Were changes made in src/deepwork/standard_jobs/[job_name]/ (NOT in .deepwork/jobs/)?"
      - "Was `deepwork install --platform claude` run?"
      - "Do files in .deepwork/jobs/ match the source files?"
      - "Were command files in .claude/commands/ regenerated?"
