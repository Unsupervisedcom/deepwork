name: update
version: "1.0.0"
summary: "Update standard jobs in src/ and sync to installed locations"
description: |
  A workflow for maintaining standard jobs bundled with DeepWork. Standard jobs
  (like `deepwork_jobs` and `deepwork_policy`) are source-controlled in
  `src/deepwork/standard_jobs/` and must be edited there—never in `.deepwork/jobs/`
  or `.claude/commands/` directly.

  This job guides you through:
  1. Identifying which standard job(s) to update from conversation context
  2. Making changes in the correct source location (`src/deepwork/standard_jobs/[job_name]/`)
  3. Running `deepwork install` to propagate changes to `.deepwork/` and command directories
  4. Verifying the sync completed successfully

  Use this job whenever you need to modify job.yml files, step instructions, or hooks
  for any standard job in the DeepWork repository.

changelog:
  - version: "1.0.0"
    changes: "Initial job creation"

steps:
  - id: job
    name: "Update Standard Job"
    description: "Edit standard job source files and sync to installed locations"
    instructions_file: steps/job.md
    inputs:
      - name: job_context
        description: "Determine from conversation context which standard job(s) to update and what changes are needed"
    outputs:
      - sync_verification.md
    dependencies: []
    stop_hooks:
      - prompt: |
          Verify the update process completed successfully:
          1. Changes were made in src/deepwork/standard_jobs/[job_name]/ (NOT in .deepwork/jobs/)
          2. `deepwork install --platform claude` was run
          3. Files in .deepwork/jobs/ match the source files
          4. Command files in .claude/commands/ were regenerated
          5. sync_verification.md documents what was changed and confirms sync status
          If ALL criteria are met, include `<promise>✓ Quality Criteria Met</promise>`.
