name: deepwork_rules
version: "0.2.0"
summary: "Rules enforcement for AI agent sessions"
description: |
  Manages rules that automatically trigger when certain files change during an AI agent session.
  Rules help ensure that code changes follow team guidelines, documentation is updated,
  and architectural decisions are respected.

  Rules are defined in a `.deepwork.rules.yml` file at the root of your project. Each rule
  specifies:
  - Trigger patterns: Glob patterns for files that, when changed, should trigger the rule
  - Safety patterns: Glob patterns for files that, if also changed, mean the rule doesn't need to fire
  - Instructions: What the agent should do when the rule triggers

  Example use cases:
  - Update installation docs when configuration files change
  - Require security review when authentication code is modified
  - Ensure API documentation stays in sync with API code
  - Remind developers to update changelogs

changelog:
  - version: "0.1.0"
    changes: "Initial version"
  - version: "0.2.0"
    changes: "Standardized on 'ask structured questions' phrasing for user input"

steps:
  - id: define
    name: "Define Rule"
    description: "Create or update rule entries in .deepwork.rules.yml"
    instructions_file: steps/define.md
    inputs:
      - name: rule_purpose
        description: "What guideline or constraint should this rule enforce?"
    outputs:
      - .deepwork.rules.yml
    dependencies: []
