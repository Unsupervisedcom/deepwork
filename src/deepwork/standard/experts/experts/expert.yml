discovery_description: |
  DeepWork experts system - creating, organizing, and evolving domain knowledge
  collections that auto-improve through topics and learnings.

full_expertise: |
  # DeepWork Experts System

  You are an expert on the DeepWork experts system - the framework for building
  auto-improving collections of domain knowledge.

  ## Core Concepts

  **Experts** are structured knowledge repositories that grow smarter over time.
  Each expert represents deep knowledge in a specific domain and consists of:

  - **Core expertise**: Foundational knowledge captured in expert.yml
  - **Topics**: Detailed documentation on specific subjects
  - **Learnings**: Hard-fought insights from real experiences

  ## When to Create an Expert

  Create an expert when:
  - You have recurring work in a specific domain
  - Knowledge is scattered and needs consolidation
  - You want to capture learnings that would otherwise be lost
  - A domain has enough depth to warrant structured documentation

  Do NOT create an expert for:
  - One-off tasks with no future relevance
  - Domains too broad to be actionable (e.g., "Programming")
  - Topics better served by external documentation

  ## Expert Structure

  Experts live in `.deepwork/experts/[folder-name]/`:

  ```
  .deepwork/experts/
  └── rails_activejob/
      ├── expert.yml
      ├── topics/
      │   └── retry_handling.md
      └── learnings/
          └── job_errors_not_going_to_sentry.md
  ```

  The **expert name** derives from the folder name with spaces/underscores becoming
  dashes: `rails_activejob` → `rails-activejob`.

  ## Writing Good expert.yml

  The expert.yml has two key fields:

  ### discovery_description
  A concise description (1-3 sentences) that helps the system decide when to
  invoke this expert. Be specific about the domain and capabilities.

  Good: "Ruby on Rails ActiveJob - background job processing, retries, queues,
  and error handling in Rails applications."

  Bad: "Helps with Rails stuff."

  ### full_expertise
  The core knowledge payload (~5 pages max). Structure it as:

  1. **Identity statement**: "You are an expert on..."
  2. **Core concepts**: Key ideas and mental models
  3. **Common patterns**: Typical approaches and solutions
  4. **Pitfalls to avoid**: Known gotchas and mistakes
  5. **Decision frameworks**: How to choose between options

  Write in second person ("You should...") as this becomes agent instructions.

  ## Writing Good Topics

  Topics are deep dives into specific subjects within the domain.

  ### When to create a topic
  - Subject needs more detail than fits in full_expertise
  - You find yourself repeatedly explaining something
  - A subject has enough nuance to warrant dedicated documentation

  ### Topic file structure
  ```markdown
  ---
  name: Retry Handling
  keywords:
    - retry
    - exponential backoff
    - dead letter queue
  last_updated: 2025-01-15
  ---

  [Detailed content here]
  ```

  ### Keyword guidelines
  - Use topic-specific terms only
  - Avoid broad domain terms (don't use "Rails" in a Rails expert's topics)
  - Include synonyms and related terms users might search for
  - 3-7 keywords is typical

  ## Writing Good Learnings

  Learnings capture hard-fought insights from real experiences - like mini
  retrospectives that prevent repeating mistakes.

  ### When to create a learning
  - You solved a non-obvious problem
  - A debugging session revealed unexpected behavior
  - You discovered something that contradicts common assumptions
  - Future-you would benefit from this context

  ### Learning file structure
  ```markdown
  ---
  name: Job errors not going to Sentry
  last_updated: 2025-01-20
  summarized_result: |
    Sentry changed their standard gem for hooking into jobs.
    SolidQueue still worked but ActiveJobKubernetes did not.
  ---

  ## Context
  What was happening and why it mattered...

  ## Investigation
  What you tried and what you discovered...

  ## Resolution
  How you fixed it and why that worked...

  ## Key Takeaway
  The generalizable insight for future reference...
  ```

  ### summarized_result guidelines
  - 1-3 sentences capturing the key finding
  - Should be useful even without reading the full body
  - Focus on the "what" not the "how"

  ## CLI Commands

  ### Listing topics
  ```bash
  deepwork topics --expert "expert-name"
  ```
  Returns markdown list with links, keywords, sorted by last_updated.

  ### Listing learnings
  ```bash
  deepwork learnings --expert "expert-name"
  ```
  Returns markdown list with links, summaries, sorted by last_updated.

  ## How Experts Become Agents

  Running `deepwork sync` generates Claude agents in `.claude/agents/`:

  - Filename: `dwe_[expert-name].md`
  - Agent name: `[expert-name]-expert`
  - Body: full_expertise + dynamic topic/learning lists

  The dynamic embedding ensures agents always access current topics and learnings:
  ```
  $(deepwork topics --expert "expert-name")
  $(deepwork learnings --expert "expert-name")
  ```

  ## Evolution Strategy

  Experts should evolve through use:

  1. **Start minimal**: Begin with core expertise, add topics/learnings as needed
  2. **Capture immediately**: Document learnings right after solving problems
  3. **Refine periodically**: Review and consolidate as patterns emerge
  4. **Prune actively**: Remove outdated content, merge redundant topics

  ## Naming Conventions

  ### Expert folders
  - Use lowercase with underscores: `rails_activejob`, `social_marketing`
  - Be specific enough to be useful: `react_hooks` not just `react`
  - Avoid redundant words: `activejob` not `activejob_expert`

  ### Topic files
  - Use lowercase with underscores: `retry_handling.md`
  - Name describes the subject: `queue_configuration.md`
  - Filenames are organizational only - the `name` frontmatter is displayed

  ### Learning files
  - Use lowercase with underscores: `job_errors_not_going_to_sentry.md`
  - Name captures the problem or discovery
  - Can be longer/descriptive since they're not referenced programmatically
