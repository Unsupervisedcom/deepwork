# deepwork_jobs:implement
#
# Generates step instruction files and syncs slash commands from the job.yml specification. Use after job spec review passes.
#
# Generated by DeepWork - do not edit manually

description = "Generates step instruction files and syncs slash commands from the job.yml specification. Use after job spec review passes."

prompt = """
# deepwork_jobs:implement

**Step 3/4** in **deepwork_jobs** workflow

> Creates and manages multi-step AI workflows. Use when defining, implementing, or improving DeepWork jobs.

## Prerequisites (Verify First)

Before proceeding, confirm these steps are complete:
- `/deepwork_jobs:review_job_spec`

## Instructions

**Goal**: Generates step instruction files and syncs slash commands from the job.yml specification. Use after job spec review passes.

# Implement Job Steps

## Objective

Generate the DeepWork job directory structure and instruction files for each step based on the validated `job.yml` specification.

## Task

Read the `job.yml` specification and create all necessary files to make the job functional, then sync the commands.

### Step 1: Create Directory Structure

Run the `make_new_job.sh` script:

```bash
.deepwork/jobs/deepwork_jobs/make_new_job.sh [job_name]
```

This creates:
- `.deepwork/jobs/[job_name]/` - Main job directory
- `.deepwork/jobs/[job_name]/steps/` - Step instruction files
- `.deepwork/jobs/[job_name]/hooks/` - Custom validation scripts
- `.deepwork/jobs/[job_name]/templates/` - Example file formats
- `.deepwork/jobs/[job_name]/AGENTS.md` - Job management guidance

**Note**: If directory exists from define step, skip or just create missing subdirectories.

### Step 2: Read and Validate the Specification

1. Read `.deepwork/jobs/[job_name]/job.yml`
2. Validate: name, version, summary, description, steps are present
3. Check dependencies reference existing steps, no circular dependencies
4. Verify file inputs match dependencies

### Step 3: Generate Step Instruction Files

For each step in job.yml, create `.deepwork/jobs/[job_name]/steps/[step_id].md`.

**Reference**: See `.deepwork/jobs/deepwork_jobs/templates/step_instruction.md.template` for structure.

**Guidelines**:

1. **Use the job description** - It provides crucial context
2. **Be specific** - Tailor instructions to the step's purpose, not generic
3. **Provide examples** - Show what good output looks like
4. **Explain the "why"** - Help understand the step's role in the workflow
5. **Ask structured questions** - Steps with user inputs MUST explicitly tell the agent to "ask structured questions"
6. **Align with hooks** - If step has `stop_hooks`, ensure quality criteria match the hooks

Each instruction file should include:
- **Objective** - What this step accomplishes
- **Task** - Detailed process
- **Output Format** - Examples of expected outputs
- **Quality Criteria** - How to verify completion

### Step 4: Verify job.yml Location

Ensure `job.yml` is at `.deepwork/jobs/[job_name]/job.yml`.

### Step 5: Sync Skills

Run:

```bash
deepwork sync
```

This generates skills in `.claude/skills/` (or appropriate platform directory).

### Step 6: Consider Rules

After implementing, consider whether **rules** would help this job's domain.

**What are rules?** Automated guardrails that trigger when certain files change, ensuring:
- Documentation stays in sync
- Team guidelines are followed
- Quality standards are maintained

**When to suggest rules:**
- Does this job produce outputs that other files depend on?
- Are there docs that should update when outputs change?
- Could changes impact other parts of the project?

**Examples**:
| Job Type | Potential Rule |
|----------|----------------|
| API Design | "Update API docs when endpoint definitions change" |
| Competitive Research | "Update strategy docs when competitor analysis changes" |
| Feature Development | "Update changelog when feature files change" |

If you identify helpful rules, explain what they would do and offer: "Would you like me to create this rule? I can run `/deepwork_rules.define` to set it up."

**Note**: Not every job needs rules. Only suggest when genuinely helpful.

## Completion Checklist

- [ ] job.yml in correct location
- [ ] All step instruction files created (not stubs)
- [ ] Instructions are specific and actionable
- [ ] Output examples provided
- [ ] Quality criteria defined for each step
- [ ] `deepwork sync` executed successfully
- [ ] Considered relevant rules for this job


### Job Context

Core commands for managing DeepWork jobs. These commands help you define new multi-step
workflows and learn from running them.

The `new_job` workflow guides you through defining and implementing a new job by
asking structured questions about your workflow, understanding each step's inputs and outputs,
reviewing the specification, and generating all necessary files.

The `learn` skill reflects on conversations where DeepWork jobs were run, identifies
confusion or inefficiencies, and improves job instructions. It also captures bespoke
learnings specific to the current run into AGENTS.md files in the working folder.


## Required Inputs


**Files from Previous Steps** - Read these first:
- `job.yml` (from `review_job_spec`)

## Work Branch

Use branch format: `deepwork/deepwork_jobs-[instance]-YYYYMMDD`

- If on a matching work branch: continue using it
- If on main/master: create new branch with `git checkout -b deepwork/deepwork_jobs-[instance]-$(date +%Y%m%d)`

## Outputs

**Required outputs**:
- `steps/` (directory)

## On Completion

1. Verify outputs are created
2. Inform user: "Step 3/4 complete, outputs: steps/"
3. **Workflow complete**: All steps finished. Consider creating a PR to merge the work branch.

---

**Reference files**: `.deepwork/jobs/deepwork_jobs/job.yml`, `.deepwork/jobs/deepwork_jobs/steps/implement.md`
"""