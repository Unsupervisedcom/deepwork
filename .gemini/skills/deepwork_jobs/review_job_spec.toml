# deepwork_jobs:review_job_spec
#
# Reviews job.yml against quality criteria using a sub-agent for unbiased validation. Use after defining a job specification.
#
# Generated by DeepWork - do not edit manually

description = "Reviews job.yml against quality criteria using a sub-agent for unbiased validation. Use after defining a job specification."

prompt = """
# deepwork_jobs:review_job_spec

**Step 2/4** in **deepwork_jobs** workflow

> Creates and manages multi-step AI workflows. Use when defining, implementing, or improving DeepWork jobs.

## Prerequisites (Verify First)

Before proceeding, confirm these steps are complete:
- `/deepwork_jobs:define`

## Instructions

**Goal**: Reviews job.yml against quality criteria using a sub-agent for unbiased validation. Use after defining a job specification.

# Review Job Specification

## Objective

Review the `job.yml` created in the define step against doc spec quality criteria, then iterate on fixes until all criteria pass.

## Why This Step Exists

The define step focuses on understanding user requirements. This review step ensures the specification meets quality standards before implementation. A fresh review catches issues that might be missed after being deeply involved in definition.

## Task

Review the job.yml against all 9 doc spec quality criteria, fix any failures, and repeat until all pass.

### Step 1: Read the Files

Read the job specification:
```
.deepwork/jobs/[job_name]/job.yml
```

Read the doc spec for reference:
```
.deepwork/doc_specs/job_spec.md
```

### Step 2: Evaluate Against Quality Criteria

Review the job.yml against these 9 criteria:

1. **Valid Identifier** - Job name is lowercase with underscores, no spaces or special characters
2. **Semantic Version** - Version follows X.Y.Z format (e.g., `1.0.0`)
3. **Concise Summary** - Summary is under 200 characters and clearly describes the job
4. **Rich Description** - Description is multi-line and explains: problem solved, process, expected outcomes, target users
5. **Changelog Present** - Includes changelog array with at least initial version entry
6. **Complete Steps** - Each step has: id, name, description, instructions_file, outputs, dependencies
7. **Valid Dependencies** - Dependencies reference existing step IDs with no circular references
8. **Input Consistency** - File inputs with `from_step` reference a step in the dependencies array
9. **Output Paths** - Outputs are valid filenames or paths

For each criterion, determine PASS or FAIL. If FAIL, note the specific issue and fix.

### Step 3: Fix Failed Criteria

For each failed criterion, edit the job.yml:

| Criterion | Common Issue | Fix |
|-----------|-------------|-----|
| Valid Identifier | Spaces or uppercase | Convert to lowercase_underscores |
| Semantic Version | Invalid format | Set to `"1.0.0"` |
| Concise Summary | Too long | Shorten to <200 chars |
| Rich Description | Single line | Add multi-line explanation |
| Changelog Present | Missing | Add changelog with initial version |
| Complete Steps | Missing fields | Add required fields |
| Valid Dependencies | Non-existent step | Fix step ID reference |
| Input Consistency | from_step not in deps | Add step to dependencies |
| Output Paths | Invalid format | Use valid filename/path |

### Step 4: Re-Evaluate (If Needed)

If any criteria failed:
1. Review the updated job.yml
2. Re-evaluate all criteria
3. Fix remaining issues
4. Repeat until all 9 pass

### Step 5: Confirm Completion

When all 9 criteria pass:

1. Announce: "All 9 doc spec quality criteria pass."
2. List what was validated
3. Include: `<promise>Quality Criteria Met</promise>`
4. Guide to next step: "Run `/deepwork_jobs.implement` to generate the step instruction files."

## Output

The validated `job.yml` file at `.deepwork/jobs/[job_name]/job.yml` that passes all 9 quality criteria.


### Job Context

Core commands for managing DeepWork jobs. These commands help you define new multi-step
workflows and learn from running them.

The `new_job` workflow guides you through defining and implementing a new job by
asking structured questions about your workflow, understanding each step's inputs and outputs,
reviewing the specification, and generating all necessary files.

The `learn` skill reflects on conversations where DeepWork jobs were run, identifies
confusion or inefficiencies, and improves job instructions. It also captures bespoke
learnings specific to the current run into AGENTS.md files in the working folder.


## Required Inputs


**Files from Previous Steps** - Read these first:
- `job.yml` (from `define`)

## Work Branch

Use branch format: `deepwork/deepwork_jobs-[instance]-YYYYMMDD`

- If on a matching work branch: continue using it
- If on main/master: create new branch with `git checkout -b deepwork/deepwork_jobs-[instance]-$(date +%Y%m%d)`

## Outputs

**Required outputs**:
- `job.yml`
  **Doc Spec**: DeepWork Job Specification
  > YAML specification file that defines a multi-step workflow job for AI agents
  **Definition**: `.deepwork/doc_specs/job_spec.md`
  **Target Audience**: AI agents executing jobs and developers defining workflows
  **Quality Criteria**:
  1. **Valid Identifier**: Job name must be lowercase with underscores, no spaces or special characters (e.g., `competitive_research`, `monthly_report`)
  2. **Semantic Version**: Version must follow semantic versioning format X.Y.Z (e.g., `1.0.0`, `2.1.3`)
  3. **Concise Summary**: Summary must be under 200 characters and clearly describe what the job accomplishes
  4. **Rich Description**: Description must be multi-line and explain: the problem solved, the process, expected outcomes, and target users
  5. **Changelog Present**: Must include a changelog array with at least the initial version entry. Changelog should only include one entry per branch at most
  6. **Complete Steps**: Each step must have: id (lowercase_underscores), name, description, instructions_file, outputs (at least one), and dependencies array
  7. **Valid Dependencies**: Dependencies must reference existing step IDs with no circular references
  8. **Input Consistency**: File inputs with `from_step` must reference a step that is in the dependencies array
  9. **Output Paths**: Outputs must be valid filenames or paths within the main repo directory structure, never in dot-directories like `.deepwork/`. Use specific, descriptive paths that lend themselves to glob patterns (e.g., `competitive_research/acme_corp/swot.md` or `operations/reports/2026-01/spending_analysis.md`). Parameterized paths like `[competitor_name]/` are encouraged for per-entity outputs. Avoid generic names (`output.md`, `analysis.md`) and transient-sounding paths (`temp/`, `draft.md`). Supporting materials for a final output should go in a peer `_dataroom` folder (e.g., `spending_analysis_dataroom/`).
  10. **Concise Instructions**: The content of the file, particularly the description, must not have excessively redundant information. It should be concise and to the point given that extra tokens will confuse the AI.

## On Completion

1. Verify outputs are created
2. Inform user: "Step 2/4 complete, outputs: job.yml"
3. **Tell user next command**: `/deepwork_jobs:implement`

---

**Reference files**: `.deepwork/jobs/deepwork_jobs/job.yml`, `.deepwork/jobs/deepwork_jobs/steps/review_job_spec.md`
"""