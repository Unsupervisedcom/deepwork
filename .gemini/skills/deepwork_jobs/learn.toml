# deepwork_jobs:learn
#
# Analyzes conversation history to improve job instructions and capture learnings. Use after running a job to refine it.
#
# Generated by DeepWork - do not edit manually

description = "Analyzes conversation history to improve job instructions and capture learnings. Use after running a job to refine it."

prompt = """
# deepwork_jobs:learn

**Standalone command** - can be run anytime

> Creates and manages multi-step AI workflows. Use when defining, implementing, or improving DeepWork jobs.


## Instructions

**Goal**: Analyzes conversation history to improve job instructions and capture learnings. Use after running a job to refine it.

# Learn from Job Execution

## Objective

Reflect on the current conversation to identify learnings from DeepWork job executions, improve job instructions with generalizable insights, and capture bespoke (run-specific) learnings in AGENTS.md files.

## Task

Analyze the conversation history to extract learnings and apply them appropriately:
- **Generalizable learnings** - Update job instruction files
- **Bespoke learnings** - Add to AGENTS.md in the deepest common folder for the topic

### Process

1. **Analyze conversation for job executions**
   - Scan for DeepWork slash commands (`/job_name.step_id`)
   - Identify which jobs and steps were executed
   - If unclear, run `git diff` to see where changes were made

2. **Identify issues and patterns**
   - **Confusion**: unnecessary questions, misunderstandings, incorrect outputs
   - **Inefficiency**: extra iterations, repeated information, missing context
   - **Errors**: failed validations, edge cases, quality criteria issues
   - **Successes**: what worked well, efficient approaches

3. **Classify each learning**
   - **Generalizable**: would help ANY future run (update instructions)
   - **Doc spec-related**: improves document quality criteria (update doc specs)
   - **Bespoke**: specific to THIS project/codebase (add to AGENTS.md)

4. **Update job instructions** (generalizable learnings)
   - Edit `.deepwork/jobs/[job_name]/steps/[step_id].md`
   - Keep concise - avoid redundancy
   - Extract shared content to `steps/shared/` if needed

5. **Update doc specs** (if applicable)
   - Edit `.deepwork/doc_specs/[doc_spec_name].md`
   - Update quality criteria or document structure

6. **Create/update AGENTS.md** (bespoke learnings)
   - Place in deepest common folder for the topic
   - Use file references instead of duplicating content
   - Pattern: "See `path/to/file.ext` for [description]"

7. **Update version and sync**
   - Bump version in job.yml (patch for instructions, minor for criteria)
   - Add changelog entry
   - Run `deepwork sync` if instructions were modified

### File Reference Patterns

**Good (references)**:
```markdown
- API endpoints follow REST conventions. See `src/api/routes.ts` for examples.
- Error handling pattern: See `src/utils/errors.ts:15-30`
```

**Avoid (duplicating)**:
```markdown
- API endpoints should return JSON with this format: { status: ..., data: ... }
```

## Output

- Updated instruction files (generalizable improvements)
- Updated doc specs (if applicable)
- AGENTS.md in the correct working folder (bespoke learnings)

Include `<promise>Quality Criteria Met</promise>` when complete.


### Job Context

Core commands for managing DeepWork jobs. These commands help you define new multi-step
workflows and learn from running them.

The `new_job` workflow guides you through defining and implementing a new job by
asking structured questions about your workflow, understanding each step's inputs and outputs,
reviewing the specification, and generating all necessary files.

The `learn` skill reflects on conversations where DeepWork jobs were run, identifies
confusion or inefficiencies, and improves job instructions. It also captures bespoke
learnings specific to the current run into AGENTS.md files in the working folder.


## Required Inputs

**User Parameters** - Gather from user before starting:
- **job_name**: Name of the job that was run (optional - will auto-detect from conversation)


## Work Branch

Use branch format: `deepwork/deepwork_jobs-[instance]-YYYYMMDD`

- If on a matching work branch: continue using it
- If on main/master: create new branch with `git checkout -b deepwork/deepwork_jobs-[instance]-$(date +%Y%m%d)`

## Outputs

**Required outputs**:
- `AGENTS.md`

## On Completion

1. Verify outputs are created
2. Inform user: "learn complete, outputs: AGENTS.md"

This standalone command can be re-run anytime.

---

**Reference files**: `.deepwork/jobs/deepwork_jobs/job.yml`, `.deepwork/jobs/deepwork_jobs/steps/learn.md`
"""