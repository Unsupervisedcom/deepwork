# make_release
#
# Automate release preparation with changelog, version bump, and PR creation
#
# Generated by DeepWork - do not edit manually

description = "Automate release preparation with changelog, version bump, and PR creation"

prompt = """
# make_release

**Multi-step workflow**: Automate release preparation with changelog, version bump, and PR creation

> **NOTE**: Gemini CLI requires manual command invocation. After each step, tell the user which command to run next.

A streamlined workflow for preparing releases of the DeepWork project. This job
automates the tedious parts of releasing: finding the latest version tag, gathering
commits since that tag, updating the changelog, bumping the version in pyproject.toml,
syncing uv.lock, and creating a pull request.

The workflow analyzes commit history to recommend an appropriate version bump
(patch, minor, or major) based on the changes, then asks for confirmation before
proceeding.

Outputs:
- Updated CHANGELOG.md with a new version entry
- Updated pyproject.toml with the new version
- Updated uv.lock
- A pull request targeting main


## Available Steps

1. **gather_changes** - Find the latest version tag and collect all commits since then
   Command: `/make_release:gather_changes`
2. **prepare_release** - Update changelog, bump version in pyproject.toml, and sync uv.lock (requires: gather_changes)
   Command: `/make_release:prepare_release`
3. **create_pr** - Create a pull request with the release changes targeting main (requires: prepare_release)
   Command: `/make_release:create_pr`

## Execution Instructions

### Step 1: Analyze Intent

Parse any text following `/make_release` to determine user intent:
- "gather_changes" or related terms → start at `/make_release:gather_changes`
- "prepare_release" or related terms → start at `/make_release:prepare_release`
- "create_pr" or related terms → start at `/make_release:create_pr`

### Step 2: Direct User to Starting Step

Tell the user which command to run:
```
/make_release:gather_changes
```

### Step 3: Guide Through Workflow

After each step completes, tell the user the next command to run until workflow is complete.

### Handling Ambiguous Intent

If user intent is unclear:
- Present available steps as numbered options
- Ask user to select the starting point

## Reference

- Job definition: `.deepwork/jobs/make_release/job.yml`
"""