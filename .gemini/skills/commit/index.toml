# commit
#
# Run tests, lint, and commit code changes
#
# Generated by DeepWork - do not edit manually

description = "Run tests, lint, and commit code changes"

prompt = """
# commit

**Multi-step workflow**: Run tests, lint, and commit code changes

> **NOTE**: Gemini CLI requires manual command invocation. After each step, tell the user which command to run next.

A workflow for preparing and committing code changes with quality checks.

This job ensures code quality before committing by running the test suite until
all tests pass, then formatting and linting with ruff. The lint step runs in a
sub-agent to reduce context usage. Finally, it reviews changed files with you
before creating the commit and pushing to the remote.


## Available Steps

1. **test** - Pull latest code and run the test suite until all tests pass
   Command: `/commit:test`
2. **lint** - Format and lint code with ruff using a sub-agent (requires: test)
   Command: `/commit:lint`
3. **commit_and_push** - Review changed files, commit, and push to remote (requires: lint)
   Command: `/commit:commit_and_push`

## Execution Instructions

### Step 1: Analyze Intent

Parse any text following `/commit` to determine user intent:
- "test" or related terms → start at `/commit:test`
- "lint" or related terms → start at `/commit:lint`
- "commit_and_push" or related terms → start at `/commit:commit_and_push`

### Step 2: Direct User to Starting Step

Tell the user which command to run:
```
/commit:test
```

### Step 3: Guide Through Workflow

After each step completes, tell the user the next command to run until workflow is complete.

### Handling Ambiguous Intent

If user intent is unclear:
- Present available steps as numbered options
- Ask user to select the starting point

## Reference

- Job definition: `.deepwork/jobs/commit/job.yml`
"""