---
name: update
description: "Updates DeepWork standard jobs in src/ and syncs to installed locations. Use when modifying deepwork_jobs or deepwork_rules."
---

# update Agent

Updates DeepWork standard jobs in src/ and syncs to installed locations. Use when modifying deepwork_jobs or deepwork_rules.

A workflow for maintaining standard jobs bundled with DeepWork. Standard jobs
(like `deepwork_jobs` and `deepwork_rules`) are source-controlled in
`src/deepwork/standard_jobs/` and must be edited there—never in `.deepwork/jobs/`
or `.claude/commands/` directly.

This job guides you through:
1. Identifying which standard job(s) to update from conversation context
2. Making changes in the correct source location (`src/deepwork/standard_jobs/[job_name]/`)
3. Running `deepwork install` to propagate changes to `.deepwork/` and command directories
4. Verifying the sync completed successfully

Use this job whenever you need to modify job.yml files, step instructions, or hooks
for any standard job in the DeepWork repository.


## Agent Overview

This agent handles the **update** job with 1 skill.

**Standalone Skills**: job
---

## How to Use This Agent

### Standalone Skills (run anytime)
- **job**: Edits standard job source files in src/ and runs deepwork install to sync changes. Use when updating job.yml or step instructions.

### All Skills
- `job` - Edits standard job source files in src/ and runs deepwork install to sync changes. Use when updating job.yml or step instructions.

---

## Agent Execution Instructions

When invoked, follow these steps:

### Step 1: Understand Intent

Parse the user's request to determine:
1. Which workflow or skill to execute
2. Any parameters or context provided
3. Whether this is a continuation of previous work

### Step 2: Check Work Branch

Before executing any skill:
1. Check current git branch
2. If on a `deepwork/update-*` branch: continue using it
3. If on main/master: create new branch `deepwork/update-[instance]-$(date +%Y%m%d)`

### Step 3: Execute the Appropriate Skill

Navigate to the relevant skill section below and follow its instructions.

### Step 4: Workflow Continuation

After completing a workflow step:
1. Inform the user of completion and outputs created
2. Automatically proceed to the next step if one exists
3. Continue until the workflow is complete or the user intervenes

---

## Skills

### Skill: job

**Type**: Standalone (can be run anytime)

**Description**: Edits standard job source files in src/ and runs deepwork install to sync changes. Use when updating job.yml or step instructions.


#### Required User Input

Gather these from the user before starting:
- **job_context**: Determine from conversation context which standard job(s) to update and what changes are needed


#### Instructions

# Update Standard Job

## Objective

Edit standard job source files in `src/deepwork/standard_jobs/` and sync changes to installed locations.

## Task

When modifying a standard job in the DeepWork repository, this step ensures changes are made in the correct location and properly propagated.

### Important: Source of Truth

Standard jobs exist in THREE locations, but only ONE is the source of truth:

| Location | Purpose | Editable? |
|----------|---------|-----------|
| `src/deepwork/standard_jobs/[job]/` | **Source of truth** | **YES** |
| `.deepwork/jobs/[job]/` | Installed copy | NO - overwritten by install |
| `.claude/commands/[job].[step].md` | Generated commands | NO - regenerated by sync |

**NEVER edit files in `.deepwork/jobs/` or `.claude/commands/` for standard jobs!**

### Process

#### 1. Identify the Standard Job to Update

From conversation context, determine:
- Which standard job needs updating (e.g., `deepwork_jobs`, `deepwork_rules`)
- What changes are needed (job.yml, step instructions, hooks, etc.)

Current standard jobs:
```bash
ls src/deepwork/standard_jobs/
```

#### 2. Make Changes in Source Location

```
src/deepwork/standard_jobs/[job_name]/
├── job.yml              # Job definition
├── steps/               # Step instruction files
├── hooks/               # Hook scripts
└── templates/           # Templates
```

#### 3. Run DeepWork Install

```bash
deepwork install --platform claude
```

For Gemini: `deepwork install --platform gemini`

#### 4. Verify the Sync

```bash
# Verify job.yml
diff src/deepwork/standard_jobs/[job_name]/job.yml .deepwork/jobs/[job_name]/job.yml

# Verify step files
diff -r src/deepwork/standard_jobs/[job_name]/steps/ .deepwork/jobs/[job_name]/steps/

# Check commands regenerated
ls -la .claude/commands/[job_name].*.md
```

## Quality Criteria

- Changes made ONLY in `src/deepwork/standard_jobs/[job_name]/`
- `deepwork install --platform claude` executed successfully
- Files in `.deepwork/jobs/` match source
- Command files regenerated
- When all criteria are met, include `<promise>✓ Quality Criteria Met</promise>`


#### Outputs

Create these files/directories:
- `files_synced`

#### On Completion

1. Verify outputs are created
2. Inform user: "job complete, outputs: files_synced"

---

## Guardrails

- **Never skip prerequisites**: Always verify required steps are complete before running a skill
- **Never produce partial outputs**: Complete all required outputs before marking a skill done
- **Always use the work branch**: Never commit directly to main/master
- **Follow quality criteria**: Use sub-agent review when quality criteria are specified
- **Ask for clarification**: If user intent is unclear, ask before proceeding

## Context Files

- Job definition: `.deepwork/jobs/update/job.yml`
- job instructions: `.deepwork/jobs/update/steps/job.md`
